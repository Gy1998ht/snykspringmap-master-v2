(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-26bb2a65"],{"692c":function(e,t,a){"use strict";a("89cd")},"89cd":function(e,t,a){},a045:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"btn-top"},[a("el-popover",{attrs:{placement:"bottom-start",trigger:"hover"}},[a("el-form",{attrs:{"label-width":"90px",size:"mini",inline:!0}},[a("el-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{label:"起始日期："}},[a("el-input",{staticStyle:{width:"120px"},attrs:{clearable:""},model:{value:e.lastDate,callback:function(t){e.lastDate=t},expression:"lastDate"}})],1),a("el-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{label:"type："}},[a("el-select",{staticStyle:{width:"100px"},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},[a("el-option",{attrs:{label:"pip",value:"pip"}}),a("el-option",{attrs:{label:"maven",value:"maven"}}),a("el-option",{attrs:{label:"any",value:"any"}})],1)],1)],1),a("el-button",{staticStyle:{"margin-right":"10px"},attrs:{slot:"reference",type:"success",plain:""},on:{click:e.crawlSnyk},slot:"reference"},[e._v("更新")])],1),a("el-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"info",plain:""},on:{click:function(t){e.addDialog=!0}}},[e._v("添加")]),a("el-radio-group",{staticStyle:{"margin-right":"20px"},attrs:{border:""},on:{change:e.search},model:{value:e.searchType,callback:function(t){e.searchType=t},expression:"searchType"}},e._l(e.types,(function(e){return a("el-radio-button",{key:e,attrs:{label:e,border:""}})})),1),a("el-input",{staticStyle:{width:"500px"},attrs:{placeholder:"通过包名查询",clearable:""},model:{value:e.searchName,callback:function(t){e.searchName=t},expression:"searchName"}}),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",plain:""},on:{click:e.search}},[e._v("查询")])],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],attrs:{data:e.list,"element-loading-text":"Loading"}},[a("el-table-column",{attrs:{label:"序号","min-width":"3%",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.$index+1+(e.currentPage-1)*e.pageSize)+" ")]}}])}),a("el-table-column",{attrs:{label:"漏洞","min-width":"20%"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:e.risk2flag[t.row.risk],effect:"dark",size:"medium"}},[e._v(e._s(t.row.risk)+" ")]),t.row.subURL?a("el-link",{staticStyle:{"margin-left":"10px","font-weight":"bold"},attrs:{target:"_blank",href:t.row.subURL}},[e._v(e._s(t.row.vulnerability))]):a("span",{staticStyle:{"margin-left":"10px","font-weight":"bold"}},[e._v(e._s(t.row.vulnerability))])]}}])}),a("el-table-column",{attrs:{label:"编号","min-width":"4%"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.id)+" ")]}}])}),a("el-table-column",{attrs:{label:"影响范围","min-width":"20%"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.affect)+" ")]}}])}),a("el-table-column",{attrs:{label:"类型","min-width":"5%",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.type)+" ")]}}])}),a("el-table-column",{attrs:{label:"发布时间","min-width":"7%",align:"center",prop:"time"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.publishedDate)+" ")]}}])})],1),a("el-pagination",{staticClass:"page",attrs:{"current-page":e.currentPage,"page-sizes":[10,20,30],"page-size":e.pageSize,layout:" sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),a("el-dialog",{attrs:{title:"添加风险",visible:e.addDialog,width:"500px",center:!0},on:{"update:visible":function(t){e.addDialog=t},close:e.clearValidate}},[a("el-form",{ref:"addForm",attrs:{model:e.addData,"label-width":"110px",rules:e.addRules}},[a("el-form-item",{attrs:{label:"名称：",prop:"vuls"}},[a("el-input",{attrs:{clearable:""},model:{value:e.addData.vuls,callback:function(t){e.$set(e.addData,"vuls",t)},expression:"addData.vuls"}})],1),a("el-form-item",{attrs:{"label-width":"0px"}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"危险等级：",prop:"risk"}},[a("el-select",{model:{value:e.addData.risk,callback:function(t){e.$set(e.addData,"risk",t)},expression:"addData.risk"}},[a("el-option",{attrs:{label:"Critical",value:"C"}}),a("el-option",{attrs:{label:"High",value:"H"}}),a("el-option",{attrs:{label:"Medium",value:"M"}})],1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"漏洞类型：",prop:"type"}},[a("el-select",{model:{value:e.addData.type,callback:function(t){e.$set(e.addData,"type",t)},expression:"addData.type"}},[a("el-option",{attrs:{label:"maven",value:"Maven"}}),a("el-option",{attrs:{label:"pip",value:"Pip"}})],1)],1)],1)],1),a("el-form-item",{attrs:{prop:"affect1",label:"影响软件："}},[a("el-input",{attrs:{clearable:"",placeholder:"groupId.artifactId"},model:{value:e.addData.affect1,callback:function(t){e.$set(e.addData,"affect1",t)},expression:"addData.affect1"}})],1),a("el-form-item",{attrs:{prop:"affect2",label:"影响版本："}},[a("el-input",{attrs:{clearable:"",placeholder:"*"},model:{value:e.addData.affect2,callback:function(t){e.$set(e.addData,"affect2",t)},expression:"addData.affect2"}})],1),a("el-form-item",{attrs:{label:"发布日期：",prop:"publishedDate"}},[a("el-input",{attrs:{clearable:"",placeholder:"格式：yyyy-MM-dd(2021-11-15)"},model:{value:e.addData.publishedDate,callback:function(t){e.$set(e.addData,"publishedDate",t)},expression:"addData.publishedDate"}})],1),a("el-form-item",{attrs:{label:"cve："}},[a("el-input",{attrs:{clearable:""},model:{value:e.addData.cve,callback:function(t){e.$set(e.addData,"cve",t)},expression:"addData.cve"}})],1),a("el-form-item",{attrs:{label:"snyk链接：",prop:"subURL"}},[a("el-input",{attrs:{clearable:""},model:{value:e.addData.subURL,callback:function(t){e.$set(e.addData,"subURL",t)},expression:"addData.subURL"}})],1),a("el-form-item",[a("el-button",{staticClass:"input-top",attrs:{type:"primary"},on:{click:e.addRisk}},[e._v("提交")])],1)],1)],1)],1)},n=[],l=a("ad8f"),i={name:"risk-management",data:function(){return{currentPage:1,pageSize:20,total:0,list:null,listLoading:!0,searchName:"",risk2flag:{C:"danger",M:"warning",H:"warning",L:"info"},searchType:"any",types:["any","Maven","pip"],type:"maven",lastDate:"2022-01-01",addDialog:!1,addData:{},addRules:{vuls:[{required:!0,message:"请输入漏洞名称",trigger:"blur"}],risk:[{required:!0,message:"请选择漏洞等级",trigger:"blur"}],type:[{required:!0,message:"请选择漏洞类型",trigger:"blur"}],affect1:[{required:!0,message:"请输入漏洞影响软件",trigger:"blur"}],affect2:[{required:!0,message:"请输入漏洞影响软件的版本",trigger:"blur"}],publishedDate:[{required:!0,message:"请输入日期",trigger:"blur"},{pattern:"^(?:(?!0000)[0-9]{4}-(?:(?:0[1-9]|1[0-2])-(?:0[1-9]|1[0-9]|2[0-8])|(?:0[13-9]|1[0-2])-(?:29|30)|(?:0[13578]|1[02])-31)|(?:[0-9]{2}(?:0[48]|[2468][048]|[13579][26])|(?:0[48]|[2468][048]|[13579][26])00)-02-29)$",message:"请输入正确的日期",trigger:"blur"}],subURL:[{type:"url",message:"请输入正确的连接",trigger:"blur"}]}}},created:function(){this.fetchData()},methods:{addRisk:function(){var e=this;this.$refs.addForm.validate((function(t){t&&(e.addData.affect=e.addData.affect1+" "+e.addData.affect2,Object(l["r"])(e.addData).then((function(t){"Succeed"===t.result?(e.addDialog=!1,e.fetchData(),e.addData={}):e.$message.error(t.message)})))}))},crawlSnyk:function(){var e=this;Object(l["a"])({lastDate:this.lastDate,type:this.searchType}).then((function(t){e.fetchData()}))},search:function(){this.currentPage=1,this.fetchData()},clearText:function(){this.fetchData()},handleSizeChange:function(e){this.pageSize=e,this.currentPage=1,this.fetchData()},handleCurrentChange:function(e){this.currentPage=e,this.fetchData()},fetchData:function(e){var t=this;this.listLoading=!0;var a={page:this.currentPage,rowPerPage:this.pageSize,keyword:this.searchName,type:this.searchType};e?a[e]=!0:a["desc"]=!0,Object(l["p"])(a).then((function(e){t.list=e.results,t.total=e.totalCount,t.listLoading=!1}))},clearValidate:function(){this.$refs.addForm.clearValidate()},changeTableSort:function(e){this.currentPage=1,console.log(e),"ascending"==e.order?this.fetchData("asc"):"descending"==e.order&&this.fetchData("desc")}}},s=i,c=(a("692c"),a("2877")),o=Object(c["a"])(s,r,n,!1,null,null,null);t["default"]=o.exports},ad8f:function(e,t,a){"use strict";a.d(t,"n",(function(){return c})),a.d(t,"o",(function(){return o})),a.d(t,"p",(function(){return u})),a.d(t,"m",(function(){return d})),a.d(t,"q",(function(){return p})),a.d(t,"v",(function(){return f})),a.d(t,"i",(function(){return m})),a.d(t,"j",(function(){return b})),a.d(t,"c",(function(){return g})),a.d(t,"k",(function(){return h})),a.d(t,"t",(function(){return v})),a.d(t,"f",(function(){return y})),a.d(t,"d",(function(){return k})),a.d(t,"h",(function(){return D})),a.d(t,"u",(function(){return w})),a.d(t,"b",(function(){return S})),a.d(t,"g",(function(){return j})),a.d(t,"x",(function(){return x})),a.d(t,"y",(function(){return _})),a.d(t,"w",(function(){return O})),a.d(t,"e",(function(){return L})),a.d(t,"r",(function(){return P})),a.d(t,"a",(function(){return R}));var r=a("b775"),n=(a("d3b7"),a("bc3a")),l=a.n(n),i=(a("5c96"),l.a.create({baseURL:"",timeout:5e4}));i.defaults.retry=4,i.defaults.retryDelay=1e5,i.interceptors.response.use((function(e){var t=e.data;return t}),(function(e){return console.log("err"+e),Promise.reject(e)}));var s=i;function c(e){return Object(r["a"])({url:"backend/Projects/searchProject",method:"get",params:e})}function o(e){return Object(r["a"])({url:"backend/Projects/searchVersion",method:"get",params:e})}function u(e){return Object(r["a"])({url:"backend/getResults",method:"get",params:e})}function d(e){return Object(r["a"])({url:"backend/Services/getServices",method:"get",params:e})}function p(e){return Object(r["a"])({url:"backend/Services/insertServices",method:"get",params:e})}function f(e){return Object(r["a"])({url:"backend/Services/updateServices",method:"get",params:e})}function m(e){return Object(r["a"])({url:"backend/Services/deleteServices",method:"get",params:e})}function b(e){return Object(r["a"])({url:"backend/getMap",method:"get",params:e})}function g(e){return Object(r["a"])({url:"backend/addNode",method:"get",params:e})}function h(e){return Object(r["a"])({url:"backend/getNode",method:"get",params:e})}function v(e){return Object(r["a"])({url:"backend/updateNode",method:"get",params:e})}function y(e){return Object(r["a"])({url:"backend/deleteNode",method:"get",params:e})}function k(e){return Object(r["a"])({url:"backend/addRelation",method:"get",params:e})}function D(e){return Object(r["a"])({url:"backend/deleteRelation",method:"get",params:e})}function w(e){return Object(r["a"])({url:"backend/updateRelation",method:"get",params:e})}function S(e){return Object(r["a"])({url:"backend/addLabel",method:"get",params:e})}function j(e){return Object(r["a"])({url:"backend/deleteLabel",method:"get",params:e})}function x(e){return Object(r["a"])({url:"backend/mavenDependency/update",method:"get",params:e})}function _(e){return s({url:"backend/mavenDependency/sshupload",method:"post",headers:{"content-type":"multipart/form-data"},data:e})}function O(e){return s({url:"backend/mavenDependency/uploadFile",method:"post",headers:{"content-type":"multipart/form-data"},data:e})}function L(e){return Object(r["a"])({url:"backend/Projects/insertVersion",method:"get",params:e})}function P(e){return Object(r["a"])({url:"backend/insertSnykData",method:"get",params:e})}function R(e){return Object(r["a"])({url:"backend/crawl",method:"get",params:e})}},b775:function(e,t,a){"use strict";a("d3b7");var r=a("bc3a"),n=a.n(r),l=(a("5c96"),a("4328")),i=a.n(l),s=n.a.create({baseURL:"",timeout:5e4,headers:{"Content-Type":"application/x-www-form-urlencoded"}});s.defaults.retry=4,s.defaults.retryDelay=1e5,s.interceptors.request.use((function(e){return e.data=i.a.stringify(e.data),e}),(function(e){return Promise.error(e)})),s.interceptors.response.use((function(e){var t=e.data;return t}),(function(e){return console.log("err"+e),Promise.reject(e)})),t["a"]=s}}]);